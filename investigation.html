<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detective Database</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Yuji+Syuku&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background-image: url('images/book.jpg');
            background-size: cover;
            background-attachment: fixed;
            font-family: 'Courier New', Courier, monospace;
            color: #f0e6d2;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 40px auto;
            background: rgba(0, 0, 0, 0.75);
            padding: 30px;
            border: 2px solid #8b4513;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        h1, h2 {
            text-align: center;
            border-bottom: 2px solid #8b4513;
            padding-bottom: 10px;
            color: #d4ac6e;
        }
        .section {
            margin-top: 40px;
        }
        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            align-items: flex-start;
        }
        .gallery-item {
            text-align: center;
            max-width: 150px;
        }
        .gallery-item img {
            width: 100%;
            border: 2px solid #5c4033;
        }
        .sherlock-note {
            font-family: 'Caveat', cursive;
            font-style: italic;
            font-size: 1.2em;
            color: #d4bf9a;
            margin-top: 5px;
            line-height: 1.2;
        }
        .nav-link {
            display: block;
            text-align: center;
            font-size: 1.5em;
            margin-top: 20px;
            color: #ffdead;
            text-decoration: none;
        }
        .nav-link:hover {
            text-decoration: underline;
        }
        .password-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #0c0c0c;
            margin: auto;
            padding: 30px;
            border: 2px solid #8b4513;
            width: 90%;
            max-width: 400px;
            text-align: center;
            color: #f0e6d2;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .modal-content input {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 20px 0;
            font-size: 1em;
        }
        .modal-content button {
            padding: 10px 20px;
            font-size: 1em;
            background-color: #5c4033;
            color: #f0e6d2;
            border: 1px solid #d4ac6e;
            cursor: pointer;
        }
        .tooltip {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.9);
            color: #fff;
            padding: 10px 15px;
            border-radius: 6px;
            z-index: 1001;
            font-family: 'Yuji Syuku', serif;
            border: 1px solid #d4ac6e;
            font-size: 1.1em;
        }
        .tooltip-trigger {
            font-style: italic;
            cursor: pointer;
            text-decoration: underline dotted;
        }
        .audio-icon-container {
            text-align: center;
            margin-top: 20px;
        }
        .audio-icon {
            cursor: pointer;
            width: 60px;
            height: 60px;
            border: 2px solid #d4ac6e;
            border-radius: 8px;
            background-color: #f0e6d2;
            transition: box-shadow 0.3s ease;
        }
        .audio-icon.playing, .audio-icon:hover {
            box-shadow: 0 0 15px 5px #ffdead;
        }
        .title-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="title-container">
            <img src="images/deerstalker.jpg" alt="Sherlock's Audio Log" class="audio-icon" data-audio-src="audio/sherlockintro.mp3">
            <h1>The Secret Beneath The Green</h1>
        </div>

        <p>
            A pleasant evening at the <span class="tooltip-trigger">estates</span> of Lord Blackwood has turned to murder and mystery. Fortunately, among the guests are two <span class="tooltip-trigger">up-and-coming</span> detectives - that's you - as well as the world-famous Sherlock Holmes - that's me!
        </p>
        <p>
            As <span class="tooltip-trigger">lead detectives</span>, I expect you to help me <span class="tooltip-trigger">unmask the killer</span>. First, I want you to explore the Blackwood Estate for clues. Then, use this evidence to <span class="tooltip-trigger">interrogate the suspects</span>.
        </p>
        <p>The game is afoot!</p>

        <p class="sherlock-note" style="text-align: center;">I look forward to working with you - Sherlock</p>
        
        <div class="audio-icon-container">
            <img src="images/audiologicon.png" alt="Watson's Audio Log" class="audio-icon" data-audio-src="audio/Watson3.mp3">
        </div>

        <div class="section">
            <h2>The Suspects</h2>
            <div class="gallery">
                <div class="gallery-item">
                    <img src="images/Camilla1.png" alt="Lady Camilla">
                    <p>Lady Camilla -<br>Lucien's cousin</p>
                    <p class="sherlock-note">"Blackwood’s cousin, resentful of Lucien’s wealth?"</p>
                </div>
                <div class="gallery-item">
                    <img src="images/Eleanor1.png" alt="Eleanor">
                    <p>Eleanor -<br>Lucien's Accountant</p>
                    <p class="sherlock-note">"Loyal servant of many years, fears losing her job?"</p>
                </div>
                <div class="gallery-item">
                    <img src="images/Henry1.png" alt="Henry Caldwell">
                    <p>Henry Caldwell -<br>Renowned Historian</p>
                    <p class="sherlock-note">"Family of very good standing, fine collection of antique books"</p>
                </div>
                <div class="gallery-item">
                    <img src="images/Watson1.png" alt="Dr. Watson">
                    <p>Dr. Watson -<br>Famed Physician</p>
                    <p class="sherlock-note">"First-rate doctor, second-rate detective"</p>
                </div>
                <div class="gallery-item">
                    <img src="images/Miles1.png" alt="Miles">
                    <p>Miles -<br>Lucien's Butler</p>
                    <p class="sherlock-note">"Faithful Butler, notable infirmities"</p>
                </div>
            </div>
             <div style="text-align: right; margin-top: 20px;">
                <img src="images/audiologicon.png" alt="Watson's Suspects Audio Log" class="audio-icon" style="width: 50px; height: 50px;" data-audio-src="audio/Watson4suspects.mp3">
            </div>
        </div>

        <div class="section">
            <a href="interrogation.html" class="nav-link">Enter the Interrogation Room</a>
            <a href="#" class="nav-link" id="caseFilesLink">[LOCKED] Access Case Files</a>
        </div>
    </div>

    <div id="caseFilesModal" class="password-modal">
        <div class="modal-content">
            <h2>Enter Passkey</h2>
            <p>You must complete your initial investigation to access the case files.</p>
            <input type="password" id="caseFilesPassword" placeholder="Enter passkey...">
            <button id="submitPassword">Submit</button>
            <p id="passwordError" style="color: red; display: none;">Incorrect passkey.</p>
        </div>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <audio id="audio-player"></audio>

    <script>
        const caseFilesLink = document.getElementById('caseFilesLink');
        const caseFilesModal = document.getElementById('caseFilesModal');
        const submitPasswordBtn = document.getElementById('submitPassword');
        const passwordInput = document.getElementById('caseFilesPassword');
        const passwordError = document.getElementById('passwordError');
        const tooltip = document.getElementById('tooltip');
        const audioPlayer = document.getElementById('audio-player');
        let currentAudioIcon = null;

        const translations = {
            'estates': 'ルシアン・ブラックウッド卿の屋敷',
            'up-and-coming': '将来有望な',
            'lead detectives': '主任刑事たち',
            'unmask the killer': '犯人の正体を暴く',
            'interrogate the suspects': '容疑者を尋問する'
        };

        document.querySelectorAll('.tooltip-trigger').forEach(trigger => {
            trigger.addEventListener('click', function (event) {
                event.stopPropagation();
                const key = this.textContent.toLowerCase();
                if (translations[key]) {
                    tooltip.textContent = translations[key];
                    tooltip.style.display = 'block';
                    const rect = this.getBoundingClientRect();
                    tooltip.style.left = `${rect.left + window.scrollX}px`;
                    tooltip.style.top = `${rect.bottom + window.scrollY + 5}px`;
                }
            });
        });

        caseFilesLink.addEventListener('click', function (event) {
            event.preventDefault();
            event.stopPropagation();
            caseFilesModal.style.display = 'flex';
        });

        submitPasswordBtn.addEventListener('click', function () {
            if (passwordInput.value.toLowerCase() === 'elementary') {
                window.location.href = 'case-files.html';
            } else {
                passwordError.style.display = 'block';
            }
        });
        
        document.addEventListener('click', function(event) {
            // Close tooltip if clicking outside
            if (!event.target.classList.contains('tooltip-trigger')) {
                tooltip.style.display = 'none';
            }

            // Close modal if clicking outside the content area
            if (event.target === caseFilesModal) {
                caseFilesModal.style.display = 'none';
                passwordError.style.display = 'none';
                passwordInput.value = '';
            }
        });

        document.querySelectorAll('.audio-icon').forEach(icon => {
            icon.addEventListener('click', function() {
                const audioSrc = this.dataset.audioSrc;
                if (audioPlayer.src.includes(audioSrc) && !audioPlayer.paused) {
                    audioPlayer.pause();
                    this.classList.remove('playing');
                    currentAudioIcon = null;
                } else {
                    if (currentAudioIcon) {
                        currentAudioIcon.classList.remove('playing');
                    }
                    audioPlayer.src = audioSrc;
                    audioPlayer.play();
                    this.classList.add('playing');
                    currentAudioIcon = this;
                }
            });
        });

        audioPlayer.addEventListener('ended', function() {
            if (currentAudioIcon) {
                currentAudioIcon.classList.remove('playing');
                currentAudioIcon = null;
            }
        });
    </script>

</body>
</html>

